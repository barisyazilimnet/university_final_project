jQuery(document).ready((function($){var halfWindowH=.5*$(window).height(),halfWindowW=.5*$(window).width(),maxRotationY=5,maxRotationX=3,aspectRatio;function initBackground(){var wrapperHeight=Math.ceil(2*halfWindowW/aspectRatio),proportions=1.1/Math.sin(Math.PI/2-5*Math.PI/180),newImageWidth=Math.ceil(2*halfWindowW*proportions),newImageHeight=Math.ceil(newImageWidth/aspectRatio),newLeft=halfWindowW-newImageWidth/2,newTop=(wrapperHeight-newImageHeight)/2;$(".cd-background-wrapper").css({}),$(".cd-floating-background").addClass("is-absolute").css({left:newLeft,width:newImageWidth})}function moveBackground(event,topOffset){var rotateY=(-event.pageX+halfWindowW)/halfWindowW*5,yPosition,rotateX=(event.pageY-topOffset-halfWindowH)/halfWindowH*3;rotateY>5&&(rotateY=5),rotateY<-5&&(rotateY=-5),rotateX>3&&(rotateX=3),rotateX<-3&&(rotateX=-3),$(".cd-floating-background").css({"-moz-transform":"rotateX("+rotateX+"deg) rotateY("+rotateY+"deg) translateZ(0)","-webkit-transform":"rotateX("+rotateX+"deg) rotateY("+rotateY+"deg) translateZ(0)","-ms-transform":"rotateX("+rotateX+"deg) rotateY("+rotateY+"deg) translateZ(0)","-o-transform":"rotateX("+rotateX+"deg) rotateY("+rotateY+"deg) translateZ(0)",transform:"rotateX("+rotateX+"deg) rotateY("+rotateY+"deg) translateZ(0)"})}$(".cd-floating-background").find("img").eq(0).load((function(){aspectRatio=$(this).width()/$(this).height(),$("html").hasClass("preserve-3d")&&initBackground()})).each((function(){this.complete&&$(this).load()})),$("body").each((function(){$(this).on("mousemove",(function(event){var wrapperOffsetTop=$(this).offset().top;$("html").hasClass("preserve-3d")&&window.requestAnimationFrame((function(){moveBackground(event,wrapperOffsetTop)}))}))})),$(window).on("resize",(function(){$("html").hasClass("preserve-3d")?window.requestAnimationFrame((function(){halfWindowH=.5*$(window).height(),halfWindowW=.5*$(window).width(),initBackground()})):($(".cd-background-wrapper").attr("style",""),$(".cd-floating-background").attr("style","").removeClass("is-absolute"))}))})),function getPerspective(){var element=document.createElement("p"),html=document.getElementsByTagName("html")[0],body=document.getElementsByTagName("body")[0],propertys={webkitTransformStyle:"-webkit-transform-style",MozTransformStyle:"-moz-transform-style",msTransformStyle:"-ms-transform-style",transformStyle:"transform-style"};for(var i in body.insertBefore(element,null),propertys)void 0!==element.style[i]&&(element.style[i]="preserve-3d");var st=window.getComputedStyle(element,null),transform=st.getPropertyValue("-webkit-transform-style")||st.getPropertyValue("-moz-transform-style")||st.getPropertyValue("-ms-transform-style")||st.getPropertyValue("transform-style");html.className+="preserve-3d"!==transform?" no-preserve-3d":" preserve-3d",document.body.removeChild(element)}();